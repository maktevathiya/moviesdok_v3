{% load static %}
<div id="hero-carousel" class="relative w-full" data-carousel="static">
  <!-- Carousel wrapper -->
  <div class="relative h-[80vh] md:h-[90vh] overflow-x-hidden max-h-[900px] min-h-[500px] min-w-56">
      {% for title in trending_all %}
      <div class="hidden duration-700 ease-in-out  " data-carousel-item>
          <!-- Backdrop Image -->
          <a hx-get="/{{title.media_type}}/{{title.id}}" hx-target="#content" hx-trigger="click" hx-push-url="true" hx-indicator="#loader">
            <img src="https://image.tmdb.org/t/p/original{{ title.backdrop_path }}" 
               class="absolute inset-0 w-full h-full object-cover object-center" 
               alt="{% if title.title %}
                      {{ title.title }}
                    {% else %}
                      {{ title.name }}
                    {% endif %}">
           <div class=" absolute h-1/2 w-full bottom-0 bg-gradient-to-tr from-[#0a0a0a] to-transparent via-transparent"></div>
          </a>
          <!-- Content Overlay -->
          <div class="absolute md:left-0 bottom-0 w-full md:w-[380px] px-5 md:px-10">
            <div class="mb-10 flex flex-col md:items-start items-center md:text-left text-center">
              <!-- Logo -->
              {% if title.logo %}
              <img src="https://image.tmdb.org/t/p/original{{ title.logo }}" 
                   class="relative h-[60px] w-auto object-contain" 
                   alt="{% if title.title %}{{ title.title }}{% else %}{{ title.name }}{% endif %} Logo">
          {% else %}
              <span class="font-bold text-2xl text-white">{% if title.title %}{{ title.title }}{% else %}{{ title.name }}{% endif %}</span>
          {% endif %}
          

             <p class="text-[#B3B2B0] font-bold text-sm mb-2">
              {% if title.genres %}
                  {% for genre in title.genres|slice:":2" %}
                      {{ genre }}{% if not forloop.last %} | {% endif %}
                  {% endfor %}
              {% endif %}
          </p>
          <div class="relative">
            
            <p id="description-container-{{ forloop.counter0 }}" class="line-clamp-4 text-[#F3F4F3] hide-last-word">
              {{ title.overview }}
            </p>
            <button id="more-button-{{ forloop.counter0 }}" data-description="{{title.overview}}" 
            class="absolute z-30 info-modal-button hidden bottom-0 right-0 text-xs font-bold text-[#0A84fF] "
            data-modal-target="info-modal" 
            data-modal-toggle="info-modal" 
            data-title="Overview" 
            >
              MORE
          </button>
          </div>
            <!--buttons-->
            </div>
          </div>
        </div>
      {% endfor %}
  </div>

  <!-- Dynamic indicators -->
  <div id="dynamic-indicator-container" class="absolute items-center z-30 flex -translate-x-1/2 bottom-5 left-1/2 space-x-3 rtl:space-x-reverse">
    <!-- Dynamic indicators will be inserted here via JavaScript -->
  </div>

  <!-- Slider controls -->
  <button type="button" class="absolute hidden md:flex top-0 start-0 z-30  items-center justify-start h-full w-[25vw] md:w-[15vw] px-4 cursor-pointer group focus:outline-none" data-carousel-prev>
      <svg class="w-4 h-6  text-gray-800 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.5" d="M5 1 1 5l4 4"/>
      </svg>
      <span class="sr-only">Previous</span>
  </button>

  <button type="button" class="absolute hidden md:flex top-0 end-0 z-30  items-center justify-end h-full w-[25vw] md:w-[15vw] px-4 cursor-pointer group focus:outline-none" data-carousel-next>
      <svg class="w-4 h-6 text-gray-800 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.5" d="m1 9 4-4-4-4"/>
      </svg>
      <span class="sr-only">Next</span>
  </button>
</div>







<div class="carousel-container carousel-container-scroll w-full">
  <!--heading of the container-->
  <div class="w-full pt-3 px-6 md:px-10 font-bold text-white text-lg">
    <h2>Trending Movies</h2>
  </div>
  <!--main container-->
  <div class="relative w-full group">
    <!--scroll button-->
    <button class="scroll-left absolute hidden md:block z-30 left-0 w-10 h-full pl-3 "
      style="background: linear-gradient(to right, #2d2d2d 60%, rgba(45, 45, 45, 0.5) 80%, rgba(45, 45, 45, 0.2) 95%, rgba(45, 45, 45, 0) 100%);">
      <svg class="w-3 h-7 fill-[#2d2d2d] group-hover:fill-white" viewBox="0 0 13 29" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.716 28.349l-.779.651L0 14.5 11.937 0l.779.651L1.303 14.5z" /></svg>
      <span class="sr-only">Previous</span>
    </button>

    <button class="scroll-right absolute hidden md:block z-30 right-0 w-10 h-full pl-4 "
      style="background: linear-gradient(to left, #2d2d2d 60%, rgba(45, 45, 45, 0.5) 80%, rgba(45, 45, 45, 0.2) 95%, rgba(45, 45, 45, 0) 100%);">
      <svg class="w-3 h-7 fill-[#2d2d2d] group-hover:fill-white" viewBox="0 0 13 29" xmlns="http://www.w3.org/2000/svg">
        <path d="M0.284 28.349l.779.651L13 14.5 1.063 0l-.779.651L11.697 14.5z" /></svg>
      <span class="sr-only">Next</span>
    </button>

    <!--list of items-->
    <ul
      class="w-full py-5 pl-6 md:px-10 flex space-x-[var(--gap)] overflow-x-auto no-scrollbar scroll-snap-x snap-mandatory scroll-smooth">
      {% for movie in trending_movies %}
      {% with counter=forloop.counter %}
      <!--item-->
      <li class="flex-shrink-0">
        <!--contains all the items like link and button if available-->
        <div>
          <!--picture container with link to different page-->
            <!--container have image and overlay buttons-->
            <div class="relative">
              <!--image-->
                <div class="flex-shrink-0 relative mb-2">
                  <a hx-get="/movie/{{movie.id}}" hx-target="#content" hx-trigger="click" hx-push-url="true" hx-indicator="#loader">
                    <img src="https://image.tmdb.org/t/p/w300{% if movie.backdrop_path %}{{ movie.backdrop_path }}{% else %}{{ movie.poster_path }}{% endif %}"
                    class="w-full aspect-[16/9] object-cover rounded-xl shadow-lg" loading="lazy"
                    onerror="this.onerror=null; this.src='{% static 'placeholder/movie.svg' %}';" 
                    decoding="async" alt="{{movie.title}}">
                  </a>
                </div>

              <!--title name and all-->
              <div >
                <button 
                class="info-modal-button w-full flex"
                type="button" 
                data-modal-target="info-modal" 
                data-modal-toggle="info-modal" 
                data-title="{{ movie.title}}" 
                data-genre="{% if movie.genres %}{% for genre in movie.genres %}{{ genre }}{% if not forloop.last %} â€¢ {% endif %}{% endfor %}{% endif %}" 
                data-release-date="{{movie.release_date}}" 
                data-description="{{movie.overview}}">
                  <div class="text-[#dfdfdf] font-bold text-4xl mr-2">
                    <h1>{{counter}}</h1>
                  </div>
                  <div class="flex flex-col items-start p-1 ">
                    <h3 class=" text-sm text-[#efefef] line-clamp-2 text-left">{{ movie.title }}</h3>
                    <h4 class="text-xs text-left text-[#989898]">
                      {% if movie.genres %}
                      {% for genre in movie.genres|slice:":2" %}
                          {{ genre }}{% if not forloop.last %} | {% endif %}
                      {% endfor %}
                      {% endif %}</h4>
                  </div>
                </button>
              </div>
            </div>
        </div>
      </li>
      {% endwith %}
      {% endfor %}
    </ul>
  </div>
</div>

<div class="border-b-[1px] mx-10 border-[#fafafa]/10"></div>



<div class="carousel-container carousel-container-scroll w-full">
  <!--heading of the container-->
  <div class="w-full pt-3 px-6 md:px-10 font-bold text-white text-lg">
    <h2>Trending TVshows</h2>
  </div>
  <!--main container-->
  <div class="relative w-full group">
    <!--scroll button-->
    <button class="scroll-left absolute hidden md:block z-30 left-0 w-10 h-full pl-3 "
      style="background: linear-gradient(to right, #2d2d2d 60%, rgba(45, 45, 45, 0.5) 80%, rgba(45, 45, 45, 0.2) 95%, rgba(45, 45, 45, 0) 100%);">
      <svg class="w-3 h-7 fill-[#2d2d2d] group-hover:fill-white" viewBox="0 0 13 29" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.716 28.349l-.779.651L0 14.5 11.937 0l.779.651L1.303 14.5z" /></svg>
      <span class="sr-only">Previous</span>
    </button>

    <button class="scroll-right absolute hidden md:block z-30 right-0 w-10 h-full pl-4 "
      style="background: linear-gradient(to left, #2d2d2d 60%, rgba(45, 45, 45, 0.5) 80%, rgba(45, 45, 45, 0.2) 95%, rgba(45, 45, 45, 0) 100%);">
      <svg class="w-3 h-7 fill-[#2d2d2d] group-hover:fill-white" viewBox="0 0 13 29" xmlns="http://www.w3.org/2000/svg">
        <path d="M0.284 28.349l.779.651L13 14.5 1.063 0l-.779.651L11.697 14.5z" /></svg>
      <span class="sr-only">Next</span>
    </button>

    <!--list of items-->
    <ul
      class="w-full py-5 pl-6 md:px-10 flex space-x-[var(--gap)] overflow-x-auto no-scrollbar scroll-snap-x snap-mandatory scroll-smooth">
      {% for movie in trending_tv %}
      {% with counter=forloop.counter %}
      <!--item-->
      <li class="flex-shrink-0">
        <!--contains all the items like link and button if available-->
        <div>
          <!--picture container with link to different page-->
            <!--container have image and overlay buttons-->
            <div class="relative">
              <!--image-->
                <div class="flex-shrink-0 relative mb-2">
                  <a hx-get="/tv/{{movie.id}}" hx-target="#content" hx-trigger="click" hx-push-url="true" hx-indicator="#loader">
                    <img src="https://image.tmdb.org/t/p/w300{% if movie.backdrop_path %}{{ movie.backdrop_path }}{% else %}{{ movie.poster_path }}{% endif %}"
                    class="w-full aspect-[16/9] object-cover rounded-xl shadow-lg" loading="lazy"
                    onerror="this.onerror=null; this.src='{% static 'placeholder/movieplaceholder.svg' %}';" 
                    decoding="async" alt="{{movie.title}}">
                  </a>
                </div>

              <!--title name and all-->
              <div >
                <button 
                class="info-modal-button w-full flex"
                type="button" 
                data-modal-target="info-modal" 
                data-modal-toggle="info-modal" 
                data-title="{{ movie.name}}" 
                data-genre="{% if movie.genres %}{% for genre in movie.genres %}{{ genre }}{% if not forloop.last %} â€¢ {% endif %}{% endfor %}{% endif %}" 
                data-release-date="{{movie.first_air_date}}" 
                data-description="{{movie.overview}}">
                  <div class="text-[#dfdfdf] font-bold text-4xl mr-2">
                    <h1>{{counter}}</h1>
                  </div>
                  <div class="flex flex-col items-start p-1 ">
                    <h3 class=" text-sm text-[#efefef] line-clamp-2 text-left">{{ movie.name }}</h3>
                    <h4 class="text-xs text-left text-[#989898]">
                      {% if movie.genres %}
                      {% for genre in movie.genres|slice:":2" %}
                          {{ genre }}{% if not forloop.last %} | {% endif %}
                      {% endfor %}
                      {% endif %}</h4>
                  </div>
                </button>
              </div>
            </div>
        </div>
      </li>
      {% endwith %}
      {% endfor %}
    </ul>
  </div>
</div>



<div class="carousel-container carousel-container-scroll w-full bg-[#1f1f1f] pb-3">
  <!--heading of the container-->
  <div class="w-full pt-3 px-6 md:px-10 font-bold text-white text-lg">
    <h2>Trailers</h2>
  </div>
  <!--main container-->
  <div class="relative w-full group">
    <!--scroll button-->
    <button class="scroll-left absolute hidden md:block z-30 left-0 w-10 h-full pl-3 "
    style="background: linear-gradient(to right, #1f1f1f 60%, rgba(31, 31, 31, 0.5) 80%, rgba(31, 31, 31, 0.2) 95%, rgba(31, 31, 31, 0) 100%);"
>
      <svg class="w-3 h-7 fill-[#1f1f1f] group-hover:fill-white" viewBox="0 0 13 29" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.716 28.349l-.779.651L0 14.5 11.937 0l.779.651L1.303 14.5z" /></svg>
      <span class="sr-only">Previous</span>
    </button>

    <button class="scroll-right absolute hidden md:block z-30 right-0 w-10 h-full pl-4 "
    style="background: linear-gradient(to left, #1f1f1f 60%, rgba(31, 31, 31, 0.5) 80%, rgba(31, 31, 31, 0.2) 95%, rgba(31, 31, 31, 0) 100%);"
>
      <svg class="w-3 h-7 fill-[#1f1f1f] group-hover:fill-white" viewBox="0 0 13 29" xmlns="http://www.w3.org/2000/svg">
        <path d="M0.284 28.349l.779.651L13 14.5 1.063 0l-.779.651L11.697 14.5z" /></svg>
      <span class="sr-only">Next</span>
    </button>

    <!--list of items-->
    <ul
      class="w-full py-5 pl-6 md:px-10 flex space-x-[var(--gap)] overflow-x-auto no-scrollbar scroll-snap-x snap-mandatory scroll-smooth">
      {% for movie in trending_all %}
      <!--item-->
      <li class="flex-shrink-0">
        <!--contains all the items like link and button if available-->
        <div>
          <!--picture container with link to different page-->
            <!--container have image and overlay buttons-->
            <div class="relative">
              <!--image-->
              <button class="relative mb-2 w-full" data-trailer= {{ movie.trailer.key }} data-drawer-target="trailer-modal" data-drawer-show="trailer-modal" data-drawer-placement="right" aria-controls="trailer-modal"  type="button">
                <div class="flex-shrink-0">
                  <img src="https://img.youtube.com/vi/{{ movie.trailer.key }}/maxresdefault.jpg"
                    class="video-thumbnail w-full aspect-[16/9] object-cover rounded-xl shadow-lg"
                    data-fallback-src="https://image.tmdb.org/t/p/w500{{ movie.backdrop_path }}" 
                    alt="Movie Poster">
                </div>
              </button>

              <!--title name and all-->
              <div>
                <button 
                class="info-modal-button w-full"
                type="button" 
                data-modal-target="info-modal" 
                data-modal-toggle="info-modal" 
                data-title="{% if movie.title %}{{ movie.title}}{% else %}{{movie.name}}{% endif %}" 
                data-genre="{% if movie.genres %}{% for genre in movie.genres %}{{ genre }}{% if not forloop.last %} â€¢ {% endif %}{% endfor %}{% endif %}" 
                data-release-date="{% if movie.release_date %}{{ movie.release_date}}{% else %}{{movie.first_air_date}}{% endif %}" 
                data-description="{{movie.overview}}">
                  <h3 class="text-sm text-[#efefef] line-clamp-2">{% if movie.title %}{{ movie.title}}{% else %}{{movie.name}}{% endif %}</h3>
                </button>
              </div>
            </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>



<div class="carousel-container-scroll w-full">
  <!--heading of the container-->
  <div class="w-full pt-3 px-6 md:px-10 font-bold text-white text-lg">
    <h2>Popular Actors</h2>
  </div>
  <!--main container-->
  <div class="relative w-full group">
    <!--scroll button-->
    <button class="scroll-left absolute hidden md:block z-30 left-0 w-10 h-full pl-3 "
      style="background: linear-gradient(to right, #2d2d2d 60%, rgba(45, 45, 45, 0.5) 80%, rgba(45, 45, 45, 0.2) 95%, rgba(45, 45, 45, 0) 100%);">
      <svg class="w-3 h-7 fill-[#2d2d2d] group-hover:fill-white" viewBox="0 0 13 29" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.716 28.349l-.779.651L0 14.5 11.937 0l.779.651L1.303 14.5z" /></svg>
      <span class="sr-only">Previous</span>
    </button>

    <button class="scroll-right absolute hidden md:block z-30 right-0 w-10 h-full pl-4 "
      style="background: linear-gradient(to left, #2d2d2d 60%, rgba(45, 45, 45, 0.5) 80%, rgba(45, 45, 45, 0.2) 95%, rgba(45, 45, 45, 0) 100%);">
      <svg class="w-3 h-7 fill-[#2d2d2d] group-hover:fill-white" viewBox="0 0 13 29" xmlns="http://www.w3.org/2000/svg">
        <path d="M0.284 28.349l.779.651L13 14.5 1.063 0l-.779.651L11.697 14.5z" /></svg>
      <span class="sr-only">Next</span>
    </button>

    <!--list of items-->
    <ul
      class="w-full py-5 pl-6 md:px-10 flex space-x-5 overflow-x-auto no-scrollbar scroll-snap-x snap-mandatory scroll-smooth">
      {% for person in popular_persons %}
      <!--item-->
      <li class="flex-shrink-0">
        <!--contains all the items like link and button if available-->
        <div>
          <!--picture container with link to different page-->
            <!--container have image and overlay buttons-->
            <div class="relative">
              <!--image-->
                <div class="flex-shrink-0 relative mb-2">
                  <a hx-get="/person/{{person.id}}" hx-target="#content" hx-trigger="click" hx-push-url="true" hx-indicator="#loader">
                    <img src="https://image.tmdb.org/t/p/w300{{ person.profile_path }}"
                    class="w-[94px] md:w-[98px] lg:w-[100px] xl:w-[132px] 2xl:w-[127px] aspect-1 object-cover rounded-full shadow-lg"
                    loading="lazy"
                    onerror="this.onerror=null; this.src='{% static 'placeholder/person.png' %}';" 
                    decoding="async"
                    alt="{{person.name}}">
                  </a>
                </div>

              <!--title name and all-->
              <div class="w-[94px] md:w-[98px] lg:w-[100px] xl:w-[132px] 2xl:w-[127px] text-xs text-[#efefef] line-clamp-3 grid place-items-center text-center leading-normal">
                <h3>{{ person.name }}</h3>
              </div>
            </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>
